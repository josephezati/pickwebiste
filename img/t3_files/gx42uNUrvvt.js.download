if (self.CavalryLogger) { CavalryLogger.start_js(["vi4UL"]); }

__d("PagesHomepagePageletUsageTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.$1={}}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:PagesHomepagePageletUsageLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:PagesHomepagePageletUsageLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:PagesHomepagePageletUsageLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setAdminMessage=function(a){this.$1.admin_message=a;return this};a.prototype.setEventName=function(a){this.$1.event_name=a;return this};a.prototype.setIsEmbedded=function(a){this.$1.is_embedded=a;return this};a.prototype.setTime=function(a){this.$1.time=a;return this};a.prototype.setUserMessage=function(a){this.$1.user_message=a;return this};a.prototype.setVC=function(a){this.$1.vc=a;return this};a.prototype.setWeight=function(a){this.$1.weight=a;return this};c={admin_message:!0,event_name:!0,is_embedded:!0,time:!0,user_message:!0,vc:!0,weight:!0};e.exports=a}),null);
__d("MessengerThreadlistFetcher.bs",["Promise","bs_curry","CurrentUser","MessagingTag","MercuryPayloadSource","MercuryServerPayloadPreprocessor","MessengerGraphQLThreadlistFetcher.bs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){__p&&__p();if(a===b("MessagingTag").INBOX)return"INBOX";else if(a===b("MessagingTag").OTHER)return"OTHER";else if(a===b("MessagingTag").ACTION_ARCHIVED)return"ARCHIVED";else if(a===b("MessagingTag").SPAM)return"SPAM";else if(a===b("MessagingTag").PENDING)return"PENDING";else if(a===b("MessagingTag").PAGE_BACKGROUND)return"PAGE_BACKGROUND";else return void 0}function a(a,c,d,e,f,h,i){__p&&__p();var j=g(c);if(j!==void 0){j=j;e={limit:e,folder:c,tags:d==null?[j]:[j,d],timestamp:f,filter:d,includeDeliveryReceipts:!0,includeSeqID:!1,isWorkUser:b("CurrentUser").isWorkUser(),onlyPinnedThreads:null};b("MessengerGraphQLThreadlistFetcher.bs").fetchAll(a,[e],h,"fetch_threadlist").then(function(c){b("MercuryServerPayloadPreprocessor").getForFBID(a).handleUpdate(Object.assign(c,{payload_source:b("MercuryPayloadSource").SERVER_FETCH_THREADLIST_INFO}));b("bs_curry")._1(i,!0);return b("Promise").resolve(0)})["catch"](function(){b("bs_curry")._1(i,!1);return b("Promise").resolve(0)});return 0}else return 0}f.fetchThreadlist=a}),null);
__d("PagesMessagingLoadingRow.react",["cx","React","joinClasses"],(function(a,b,c,d,e,f,g){__p&&__p();var h;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.render=function(){"use strict";var a="_5y2c"+(this.props.useDarkVersion?"":" _4a7c")+(this.props.useDarkVersion?" _4a7d":"");a=b("joinClasses")(a,this.props.className);return b("React").createElement("div",{className:a})};function a(){"use strict";h.apply(this,arguments)}e.exports=a}),null);
__d("PagesMessagingRelativeTimestamp.react",["LongLiveTimer","React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=1e3;c=babelHelpers.inherits(a,b("React").Component);g=c&&c.prototype;function a(a,b){g.constructor.call(this,a,b),this.state={relativeTime:this.$1(a.utcTimestamp,a.shouldShorternTime)}}a.prototype.UNSAFE_componentWillReceiveProps=function(a){(a.utcTimestamp!==this.props.utcTimestamp||a.shouldShorternTime!==this.props.shouldShorternTime)&&this.setState({relativeTime:this.$1(a.utcTimestamp,a.shouldShorternTime)})};a.prototype.render=function(){return b("React").createElement("div",{className:this.props.className},b("React").createElement("abbr",{className:"livetimestamp","data-utime":this.props.utcTimestamp/h,"data-shorten":this.props.shouldShorternTime},this.state.relativeTime.text))};a.prototype.$1=function(a,c){return b("LongLiveTimer").renderRelativeTimeToServer(a/h,c)};e.exports=a}),null);
__d("PagesMessagingHomePageletLogger",["PagesHomepagePageletUsageTypedLogger"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){this.$1=a}a.prototype.$2=function(a,c){a={is_embedded:this.$1,event_name:a};c&&(a=Object.assign(a,c));c=new(b("PagesHomepagePageletUsageTypedLogger"))();c.updateData(a).log()};a.prototype.logEvent=function(a){this.$2(a,null)};a.prototype.logEventWithUserMessage=function(a,b){this.$2(a,{user_message:b})};a.prototype.logReplyMessage=function(a,b,c){this.$2(a,{user_message:b,admin_message:c})};e.exports=a}),null);
__d("PagesMessagingHomePageletAction",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({CLICK_MESSAGE:"click_message",MARK_ARCHIVE:"mark_archive",MARK_READ:"mark_read",MARK_SPAM:"mark_spam",REPLY_MESSAGE:"reply_message",GO_TO_INBOX:"go_to_inbox",RENDER:"render"})}),null);
__d("PagesMessagingInboxOverviewPlacement",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({AYMT_HOMEPAGE_PANEL:"aymt_homepage_panel",ADMIN_HOVERCARD:"admin_hovercard",UNKNOWN:"unknown"})}),null);
__d("PagesMessagingMessageSnippet.react",["cx","fbt","Image.react","Layout.react","LeftRight.react","MercuryThreadSnippet.react","PagesMessagingInboxOverviewPlacement","PagesMessagingLoadingRow.react","PagesMessagingRelativeTimestamp.react","React","joinClasses"],(function(a,b,c,d,e,f,g,h){__p&&__p();var i,j=b("Layout.react").Column,k=b("Layout.react").FillColumn;i=babelHelpers.inherits(a,b("React").Component);i&&i.prototype;a.prototype.render=function(){"use strict";var a=b("joinClasses")("_3sfn",this.props.className);return b("React").createElement("div",{className:a,"data-hover":"tooltip","data-tooltip-content":h._("Click to read and act on the full message."),role:"button"},this.$1())};a.prototype.$1=function(){"use strict";return b("React").createElement(b("Layout.react"),null,b("React").createElement(j,null,this.$2()),b("React").createElement(k,null,this.$3()))};a.prototype.$2=function(){"use strict";return!this.props.message?b("React").createElement(b("PagesMessagingLoadingRow.react"),{className:(this.props.placement===b("PagesMessagingInboxOverviewPlacement").AYMT_HOMEPAGE_PANEL?"_3fep":"")+(this.props.placement===b("PagesMessagingInboxOverviewPlacement").ADMIN_HOVERCARD?" _3feq":"")}):b("React").createElement(b("Image.react"),{className:(this.props.placement===b("PagesMessagingInboxOverviewPlacement").AYMT_HOMEPAGE_PANEL?"_3fep":"")+(this.props.placement===b("PagesMessagingInboxOverviewPlacement").ADMIN_HOVERCARD?" _3feq":""),src:this.props.message?this.props.message.senderImageSrc:""})};a.prototype.$3=function(){"use strict";var a=this.props.message;if(!a)return b("React").createElement("div",{className:"_3sfp"},b("React").createElement(b("PagesMessagingLoadingRow.react"),{className:"_3sfq"}),b("React").createElement(b("PagesMessagingLoadingRow.react"),{className:"_3sfr"}));var c=null;this.props.placement===b("PagesMessagingInboxOverviewPlacement").ADMIN_HOVERCARD&&(c=b("React").createElement(b("LeftRight.react"),null,b("React").createElement("div",{className:"_2iz9"},h._("Latest Unread Message")),b("React").createElement(b("PagesMessagingRelativeTimestamp.react"),{className:"_2iz6",utcTimestamp:a.thread.last_message_timestamp,shouldShorternTime:!1})));return b("React").createElement("div",{className:"_3sfp"},c,b("React").createElement("div",{className:(this.props.placement===b("PagesMessagingInboxOverviewPlacement").AYMT_HOMEPAGE_PANEL?"_3fer":"")+(this.props.placement===b("PagesMessagingInboxOverviewPlacement").ADMIN_HOVERCARD?" _3fes":"")+" _3sg9"},a.senderName),b("React").createElement(b("MercuryThreadSnippet.react"),{className:"_3sga _3sg9",participants:a.participants,shouldRenderYou:!1,thread:a.thread,viewer:this.props.pageID}))};function a(){"use strict";i.apply(this,arguments)}e.exports=a}),null);
__d("PagesMessagingInboxOverview.react",["cx","fbt","invariant","immutable","MercuryFilters.bs","MessagingTag","LeftRight.react","Link.react","MercuryIDs","MercurySyncPageEnvironment","MessengerState.bs","MessengerParticipants.bs","MessengerThreadlistFetcher.bs","PagesMessagingHomePageletAction","PagesMessagingHomePageletLogger","PagesMessagingInboxOverviewPlacement","PagesMessagingMessageSnippet.react","PagesMessagingRelativeTimestamp.react","React","Random","XPagesManagerMessagesController"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k=b("immutable").Map;c=babelHelpers.inherits(a,b("React").Component);j=c&&c.prototype;function a(a,c){j.constructor.call(this,a,c),this.$1=new(b("PagesMessagingHomePageletLogger"))(!0),this.state={isFetching:!1}}a.prototype.componentDidMount=function(){this.fetch(),this.$1.logEvent(b("PagesMessagingHomePageletAction").RENDER)};a.prototype.UNSAFE_componentWillReceiveProps=function(a){a.pageInfo!==this.props.pageInfo&&this.fetch()};a.prototype.fetch=function(){if(this.state.isFetching)return;this.setState({isFetching:!0},function(){b("MessengerThreadlistFetcher.bs").fetchThreadlist(this.props.pageInfo.id,b("MessagingTag").INBOX,b("MercuryFilters.bs").unread,5,null,!0,function(a){return this.setState({isFetching:!1})}.bind(this))}.bind(this))};a.prototype.render=function(){var a=null;this.state.isFetching?a=this.$2():a=this.$3();return b("React").createElement("div",{className:this.props.className},a)};a.prototype.$2=function(){return b("React").createElement(b("PagesMessagingMessageSnippet.react"),{className:"_2iza _12f2",message:null,pageID:this.props.pageInfo.id,placement:this.props.placement})};a.prototype.$4=function(a){return b("XPagesManagerMessagesController").getURIBuilder().setString("page_token",this.props.pageInfo.uriToken).setString("threadid",b("MercuryIDs").getUserIDFromThreadID(a.thread.thread_id)).setString("ref",this.props.placement).getURI()};a.prototype.$5=function(a){__p&&__p();a=a[b("MessagingTag").INBOX]?a[b("MessagingTag").INBOX][b("MercuryFilters.bs").unread]:null;a=a?a.threadlist:null;if(!a||a.length===0)return null;a=this.props.showRandomMessage?a[Math.floor(b("Random").random()*a.length)]:a[0];a=b("MessengerState.bs").getThreadMetaNow(this.props.pageInfo.id,a);a||i(0,3277);var c=a.other_user_fbid;c||i(0,3278);c="fbid:"+c;c=b("MessengerParticipants.bs").getNow(c);return{senderImageSrc:c.image_src,senderName:c.name,senderShortName:c.short_name,thread:a,participants:k(b("immutable").Seq(a.participants).map(function(a){return[a,b("MessengerParticipants.bs").getNow(a)]}))}};a.prototype.$3=function(){return b("React").createElement(b("MessengerState.bs").jsComponent,{fbid:this.props.pageInfo.id},function(a){a=b("MessengerState.bs").threadlistOrderMap(a);a=this.$5(a);if(a==null)return null;var c=null;this.props.placement===b("PagesMessagingInboxOverviewPlacement").AYMT_HOMEPAGE_PANEL&&(c=b("React").createElement(b("LeftRight.react"),null,b("React").createElement("div",{className:"_2iz9"},h._("Latest Unread Message")),b("React").createElement(b("PagesMessagingRelativeTimestamp.react"),{className:"_2iz6",shouldShorternTime:!1,utcTimestamp:a.thread.last_message_timestamp})));return b("React").createElement(b("Link.react"),{className:"_2hlr",href:this.$4(a)},c,b("React").createElement(b("PagesMessagingMessageSnippet.react"),{className:"_2iza",message:a,pageID:this.props.pageInfo.id,placement:this.props.placement}))}.bind(this))};e.exports=a}),null);
__d("PagesMessagingInlineInboxView.react",["PagesMessagingInboxOverview.react","React"],(function(a,b,c,d,e,f){"use strict";var g;g=babelHelpers.inherits(a,b("React").Component);g&&g.prototype;a.prototype.render=function(){return b("React").createElement(b("PagesMessagingInboxOverview.react"),{pageInfo:this.props.pageInfo,showRandomMessage:this.props.showRandomMessage,placement:this.props.placement})};function a(){g.apply(this,arguments)}e.exports=a}),null);